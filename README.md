# Slack-to-S3-Integration-A-Serverless-Lambda

## Slack S3 File Manager

A serverless application that turns a Slack channel into a powerful, easy-to-use interface for an Amazon S3 bucket. This project allows users to upload, fetch, and list files in a private S3 bucket directly from Slack using simple slash commands and file sharing.

The core of this application is a single AWS Lambda function that acts as a bridge between the Slack API and AWS S3, providing a cost-effective and secure solution for file management.

***

## Features

* **Automatic File Uploads**: Simply drag and drop a file into the designated Slack channel, and it will be automatically uploaded to your S3 bucket.
* **Secure File Fetching**: Use the `/s3-fetch <filename>` command to generate a secure, temporary (1-hour) download link for any file.
* **File Listing**: Use the `/s3-list` command to get a complete list of all files currently stored in the S3 bucket.
* **Serverless & Cost-Effective**: Built on AWS Lambda with a Function URL, eliminating the need for a dedicated server or a more expensive API Gateway setup.
* **Secure by Default**: Files are stored in a private S3 bucket, accessible only through the Lambda function's IAM role and the generated pre-signed URLs.

***

## Architecture

The workflow is simple and direct:

1.  **User Action (Slack)**: A user either uploads a file or types a slash command (`/s3-fetch` or `/s3-list`).
2.  **Webhook to Lambda**: Slack sends a webhook event to a dedicated **AWS Lambda Function URL**.
3.  **Lambda Processing**: The **Lambda function** processes the request:
    * For **file uploads**, it downloads the file from Slack's temporary storage and uploads it to S3.
    * For `/s3-fetch`, it generates a secure S3 pre-signed URL for the requested file.
    * For `/s3-list`, it queries the S3 bucket for a list of its contents.
4.  **Response to Slack**: The Lambda function posts a confirmation message, a download link, or a file list back to the Slack channel.

```text
+--------------+    +--------------------------+    +------------------+
|              |    |                          |    |                  |
|   Slack      |<-->| AWS Lambda Function URL  |<-->|    Amazon S3      |
|  (User UI)   |    |   (Python Backend)       |    | (Private Bucket)  |
|              |    |                          |    |                  |
+--------------+    +--------------------------+    +------------------+
```

```mermaid
flowchart LR
    A[Slack\n(User UI)] <--> B[AWS Lambda Function URL\n(Python Backend)]
    B <--> C[Amazon S3\n(Private Bucket)]
```
***

## Setup and Deployment

This project can be deployed by following a detailed implementation guide. The high-level steps are:

### 1. AWS Setup

* **Create S3 Bucket**: Create a new, private S3 bucket to store your files. Note its name and region.
* **Create IAM Role**: Create an IAM role for the Lambda function with `AWSLambdaBasicExecutionRole` and `AmazonS3FullAccess` permissions.
* **Create Lambda Function**: Create a Python-based Lambda function using the role created above.

### 2. Slack App Setup

* **Create a New App**: Create a new Slack app in your workspace.
* **Add Permissions**: Add the `chat:write`, `files:read`, and `commands` OAuth scopes to your bot token.
* **Install App**: Install the app to your workspace and copy the **Bot User OAuth Token**.

### 3. Connection and Configuration

* **Create Lambda Layer**: Create and attach a Lambda layer for the `requests` Python library.
* **Deploy Code**: Copy the final Python script into your Lambda function's code editor and deploy.
* **Create Function URL**: Create a public Function URL for your Lambda with `NONE` for the auth type. Copy the generated URL.
* **Set Environment Variables**: In your Lambda function's configuration, set the following environment variables:
    * `SLACK_BOT_TOKEN`
    * `S3_BUCKET_NAME`
    * `S3_BUCKET_REGION`
* **Configure Slack URLs**: In your Slack app's settings, paste the Lambda Function URL into the **Request URL** field for both **Event Subscriptions** and your **Slash Commands**.

***

## Usage

1.  **Invite the Bot**: Invite the bot user to the channel you want to use for file management.
2.  **Upload a file**: Drag and drop a file into the channel.
3.  **List files**: Type `/s3-list`
4.  **Fetch a file**: Type `/s3-fetch my-document.pdf`

***

## Security

* The S3 bucket is configured to **block all public access**.
* The Lambda function uses a specific **IAM Role** with least-privilege permissions (though `AmazonS3FullAccess` is used for simplicity in the guide, it can be restricted further).
* Download links generated by `/s3-fetch` are **pre-signed and temporary**, expiring after one hour.
